<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia Site Renderer 1.11.1 from src/site/markdown/datenpumpe.md at 2023-06-29
 | Rendered using Apache Maven Fluido Skin 1.10.0
-->
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="generator" content="Apache Maven Doxia Site Renderer 1.11.1" />
    <title>Logstash/Gelf Loggers &#x2013; Datenpumpe</title>
    <link rel="stylesheet" href="./css/apache-maven-fluido-1.10.0.min.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />
    <script src="./js/apache-maven-fluido-1.10.0.min.js"></script>
  </head>
  <body class="topBarDisabled">
    <a href="https://github.com/mp911de/logstash-gelf">
      <img style="position: absolute; top: 0; right: 0; border: 0; z-index: 10000;"
        src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png"
        alt="Fork me on GitHub">
    </a>
    <div class="container-fluid">
      <header>
        <div id="banner">
          <div class="pull-left"><a href="http://logging.paluch.biz/" id="bannerLeft"><h2>Logstash/Gelf Loggers</h2>
</a></div>
          <div class="pull-right"></div>
          <div class="clear"><hr/></div>
        </div>

        <div id="breadcrumbs">
          <ul class="breadcrumb">
        <li id="publishDate">Last Published: 2023-06-29<span class="divider">|</span>
</li>
          <li id="projectVersion">Version: 1.15.2-SNAPSHOT</li>
          </ul>
        </div>
      </header>
      <div class="row-fluid">
        <header id="leftColumn" class="span2">
          <nav class="well sidebar-nav">
  <ul class="nav nav-list">
   <li class="nav-header">Overview</li>
    <li><a href="index.html" title="Introduction"><span class="none"></span>Introduction</a></li>
    <li><a href="download.html" title="Download"><span class="none"></span>Download</a></li>
   <li class="nav-header">Examples</li>
    <li><a href="examples/jul.html" title="Java Util Logging"><span class="none"></span>Java Util Logging</a></li>
    <li><a href="examples/jul-json.html" title="Java Util Logging Formatter"><span class="none"></span>Java Util Logging Formatter</a></li>
    <li><a href="examples/log4j-1.2.x.html" title="log4j v1.2.x"><span class="none"></span>log4j v1.2.x</a></li>
    <li><a href="examples/log4j-1.2.x-json.html" title="log4j v1.2.x JSON Layout"><span class="none"></span>log4j v1.2.x JSON Layout</a></li>
    <li><a href="examples/log4j-2.x.html" title="log4j v2.x"><span class="none"></span>log4j v2.x</a></li>
    <li><a href="examples/jbossas7.html" title="JBoss AS7"><span class="none"></span>JBoss AS7</a></li>
    <li><a href="examples/wildfly.html" title="WildFly"><span class="none"></span>WildFly</a></li>
    <li><a href="examples/wildfly-json.html" title="WildFly JSON Formatter"><span class="none"></span>WildFly JSON Formatter</a></li>
    <li><a href="examples/wildfly-swarm-thorntail.html" title="Thorntail (WildFly Swarm)"><span class="none"></span>Thorntail (WildFly Swarm)</a></li>
    <li><a href="examples/logback.html" title="Logback"><span class="none"></span>Logback</a></li>
   <li class="nav-header">Documentation</li>
    <li><a href="mdc.html" title="MDC Values"><span class="none"></span>MDC Values</a></li>
    <li><a href="mdcprofiling.html" title="MDC Profiling"><span class="none"></span>MDC Profiling</a></li>
    <li><a href="hostname-lookup.html" title="Hostname Lookup"><span class="none"></span>Hostname Lookup</a></li>
    <li><a href="default-fields.html" title="Default Fields"><span class="none"></span>Default Fields</a></li>
    <li><a href="syslog-level-mapping.html" title="Syslog Level Mapping"><span class="none"></span>Syslog Level Mapping</a></li>
    <li><a href="stack-trace-filter.html" title="Stack Trace Filter"><span class="none"></span>Stack Trace Filter</a></li>
    <li><a href="tcp.html" title="TCP Transport"><span class="none"></span>TCP Transport</a></li>
    <li><a href="udp.html" title="UDP Transport"><span class="none"></span>UDP Transport</a></li>
    <li><a href="http.html" title="HTTP Transport"><span class="none"></span>HTTP Transport</a></li>
    <li><a href="kafka.html" title="Kafka Transport"><span class="none"></span>Kafka Transport</a></li>
    <li><a href="redis.html" title="Redis Transport"><span class="none"></span>Redis Transport</a></li>
    <li class="active"><a href="#"><span class="none"></span>Datenpumpe</a></li>
   <li class="nav-header">Project Documentation</li>
    <li><a href="apidocs/index.html" title="JavaDoc"><span class="none"></span>JavaDoc</a></li>
   <li class="nav-header">Project Documentation</li>
    <li><a href="project-info.html" title="Project Information"><span class="icon-chevron-right"></span>Project Information</a></li>
    <li><a href="project-reports.html" title="Project Reports"><span class="icon-chevron-right"></span>Project Reports</a></li>
  </ul>
          </nav>
          <div class="well sidebar-nav">
            <hr />
            <div id="poweredBy">
              <div class="clear"></div>
    <div id="twitter" style="border:none; margin-top: 10px">
    <a href="https://twitter.com/mp911de" class="twitter-follow-button" data-show-count="true" data-align="left" data-size="medium" data-show-screen-name="true" data-lang="en">Follow mp911de</a>
    <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
    </div>
              <div class="clear"></div>
              <div class="clear"></div>
<a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy"><img class="builtBy" alt="Built by Maven" src="./images/logos/maven-feather.png" /></a>
            </div>
          </div>
        </header>
        <main id="bodyColumn"  class="span10" >
<h1>Datenpumpe</h1>
<p>Central logging, log aggregation and the use of logstash facilitate event sourcing. The more log events your data store holds the
more value you can gain of those events. Business related events and technical events might be produced now by your software and carried
out as log events. Log events are limited at a certain point. Sure, MDC is a good way to enrich log events with details of your runtime.
When it comes down to add real business related data (monetary amounts, durations, aggregations) you don't want to use MDC
since MDC is thread-bound and you have to clean it up afterwards. Datenpumpe is here to provide an appropriate API for
sending arbitrary data using GELF.</p>
<p>Datenpumpe is a german term, which means pump for data. And this is the exact purpose of it.
Use it to push any data into your (ELK) stack. Reuse GELF, reuse any Redis to push events, stats, messages and anything
for later consolidation and reporting.</p>
<p>Examples:</p>

<div class="source"><pre class="prettyprint linenums"><code>public class MyServlet extends HttpServlet {

    public Datenpumpe datenpumpe;

    @Override
    protected void doGet(HttpServletRequest req, HttpServletResponse resp)  {

        Map&lt;String, Object&gt; message = new HashMap&lt;&gt;;
        message.put(&quot;uri&quot;, req.getRequestUri());
        message.put(&quot;resource&quot;, &quot;MyServlet&quot;);
        message.put(&quot;event&quot;, &quot;access&quot;);

        datenpumpe.submit(message);
    }
}
</code></pre></div>
<p>Or more sophisticated (using reflection to retrieve the fields from your model):</p>

<div class="source"><pre class="prettyprint linenums"><code>@Stateless
public class MyEjb {

    public Datenpumpe datenpumpe;

    public void shoppingCartOrdered(ShoppingCart cart) {
        datenpumpe.submit(cart);
    }
}

public class ShoppingCart{

    private String cartId;
    private double amount;
    private String customerId;

    public String getCartId(){
        return cartId;
    }

    public double getAmount(){
        return amount;
    }

    public String getCustomerId(){
        return customerId;
    }
}
</code></pre></div>
<p>Setup:</p>

<div class="source"><pre class="prettyprint linenums"><code>GelfSenderConfiguration senderConfiguration = new GelfSenderConfiguration() {

    @Override
    public int getPort() {
        return 12201;
    }

    @Override
    public String getHost() {
        return &quot;tcp:myhost&quot;;
    }

    @Override
    public ErrorReporter getErrorReporter() {
        return new Slf4jErrorReporter();
    }

    @Override
    public Map&lt;String, Object&gt; getSpecificConfigurations() {
        return Collections.emptyMap();
    }
};

Datenpumpe datenpumpe = new DatenpumpeImpl(senderConfiguration);
</code></pre></div>
<p>This results in a Gelf message like:</p>

<div class="source"><pre class="prettyprint linenums"><code>{ &quot;timestamp&quot;: 1406797244.645,
  &quot;facility&quot;: &quot;logstash-gelf&quot;,
  &quot;_cartId&quot;: &quot;the cart id&quot;,
  &quot;_amount&quot;: 9.27,
  &quot;_customerId&quot;: &quot;the customer id&quot;
}
</code></pre></div>
<p>JNDI/Resource injection is supported on JBoss AS7/Wildfly (JBoss AS8) platforms though <a class="externalLink" href="https://github.com/mp911de/logstash-gelf-subsystem">https://github.com/mp911de/logstash-gelf-subsystem</a></p>
        </main>
      </div>
    </div>
    <hr/>
    <footer>
      <div class="container-fluid">
        <div class="row-fluid">
            <p>&#169;      2013&#x2013;2023
</p>
        </div>
      </div>
    </footer>
    <!-- Piwik -->
    <script>
    var pkBaseURL = (("https:" == document.location.protocol) ? "https://piwik.paluch.biz/" : "http://piwik.paluch.biz/");
    document.write(unescape("%3Cscript src='" + pkBaseURL + "piwik.js'%3E%3C/script%3E"));
    </script><script>
    try {
    var piwikTracker = Piwik.getTracker(pkBaseURL + "piwik.php", 4);
    piwikTracker.trackPageView();
    piwikTracker.enableLinkTracking();
    } catch( err ) {}
    </script><noscript><p><img src="http://piwik.paluch.biz/piwik.php?idsite=4" style="border:0" alt="Piwik"/></p></noscript>
    <!-- End Piwik Tag -->
<script>
	if(anchors) {
	  anchors.add();
	}
</script>
  </body>
</html>