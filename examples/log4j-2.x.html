<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia Site Renderer 1.7.4 at 2018-06-05 
 | Rendered using Apache Maven Fluido Skin 1.5
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20180605" />
    <meta http-equiv="Content-Language" content="en" />
    <title>Logstash/Gelf Loggers &#x2013; log4j2</title>
    <link rel="stylesheet" href="../css/apache-maven-fluido-1.5.min.css" />
    <link rel="stylesheet" href="../css/site.css" />
    <link rel="stylesheet" href="../css/print.css" media="print" />

      
    <script type="text/javascript" src="../js/apache-maven-fluido-1.5.min.js"></script>

                      </head>
        <body class="topBarDisabled">
          
    
    
            
    
        
    <a href="https://github.com/mp911de/logstash-gelf">
      <img style="position: absolute; top: 0; right: 0; border: 0; z-index: 10000;"
        src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png"
        alt="Fork me on GitHub">
    </a>
  
                
                    
    
        <div class="container-fluid">
          <div id="banner">
        <div class="pull-left">
                                    <a href="http://logging.paluch.biz/" id="bannerLeft">
                <h2>Logstash/Gelf Loggers</h2>
                </a>
                      </div>
        <div class="pull-right">  </div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
              
                  <li id="publishDate">Last Published: 2018-06-05
                      <span class="divider">|</span>
                   </li>
                  <li id="projectVersion">Version: 1.11.3-SNAPSHOT
                      </li>
                      
              
      
                            </ul>
      </div>

            
      <div class="row-fluid">
        <div id="leftColumn" class="span2">
          <div class="well sidebar-nav">
              
                <ul class="nav nav-list">
                    <li class="nav-header">Overview</li>
                              
      <li>
  
                          <a href="../index.html" title="Introduction">
          <span class="none"></span>
        Introduction</a>
            </li>
                
      <li>
  
                          <a href="../download.html" title="Download">
          <span class="none"></span>
        Download</a>
            </li>
                              <li class="nav-header">Examples</li>
                              
      <li>
  
                          <a href="../examples/jul.html" title="Java Util Logging">
          <span class="none"></span>
        Java Util Logging</a>
            </li>
                
      <li>
  
                          <a href="../examples/log4j-1.2.x.html" title="log4j v1.2.x">
          <span class="none"></span>
        log4j v1.2.x</a>
            </li>
                
      <li>
  
                          <a href="../examples/log4j-1.2.x-json.html" title="log4j v1.2.x JSON Layout">
          <span class="none"></span>
        log4j v1.2.x JSON Layout</a>
            </li>
                
      <li class="active">
  
            <a href="#"><span class="none"></span>log4j v2.x</a>
          </li>
                
      <li>
  
                          <a href="../examples/jbossas7.html" title="JBoss AS7">
          <span class="none"></span>
        JBoss AS7</a>
            </li>
                
      <li>
  
                          <a href="../examples/wildfly.html" title="WildFly">
          <span class="none"></span>
        WildFly</a>
            </li>
                
      <li>
  
                          <a href="../examples/wildfly-json.html" title="WildFly JSON Formatter">
          <span class="none"></span>
        WildFly JSON Formatter</a>
            </li>
                
      <li>
  
                          <a href="../examples/logback.html" title="Logback">
          <span class="none"></span>
        Logback</a>
            </li>
                              <li class="nav-header">Documentation</li>
                              
      <li>
  
                          <a href="../mdc.html" title="MDC Values">
          <span class="none"></span>
        MDC Values</a>
            </li>
                
      <li>
  
                          <a href="../mdcprofiling.html" title="MDC Profiling">
          <span class="none"></span>
        MDC Profiling</a>
            </li>
                
      <li>
  
                          <a href="../hostname-lookup.html" title="Hostname Lookup">
          <span class="none"></span>
        Hostname Lookup</a>
            </li>
                
      <li>
  
                          <a href="../default-fields.html" title="Default Fields">
          <span class="none"></span>
        Default Fields</a>
            </li>
                
      <li>
  
                          <a href="../syslog-level-mapping.html" title="Syslog Level Mapping">
          <span class="none"></span>
        Syslog Level Mapping</a>
            </li>
                
      <li>
  
                          <a href="../stack-trace-filter.html" title="Stack Trace Filter">
          <span class="none"></span>
        Stack Trace Filter</a>
            </li>
                
      <li>
  
                          <a href="../tcp.html" title="TCP Transport">
          <span class="none"></span>
        TCP Transport</a>
            </li>
                
      <li>
  
                          <a href="../udp.html" title="UDP Transport">
          <span class="none"></span>
        UDP Transport</a>
            </li>
                
      <li>
  
                          <a href="../redis.html" title="Redis Transport">
          <span class="none"></span>
        Redis Transport</a>
            </li>
                
      <li>
  
                          <a href="../http.html" title="HTTP Transport">
          <span class="none"></span>
        HTTP Transport</a>
            </li>
                
      <li>
  
                          <a href="../datenpumpe.html" title="Datenpumpe">
          <span class="none"></span>
        Datenpumpe</a>
            </li>
                              <li class="nav-header">Project Documentation</li>
                              
      <li>
  
                          <a href="../apidocs/index.html" title="JavaDoc">
          <span class="none"></span>
        JavaDoc</a>
            </li>
                              <li class="nav-header">Project Documentation</li>
                                                                                                                                                                                                                                                                    
      <li>
  
                          <a href="../project-info.html" title="Project Information">
          <span class="icon-chevron-right"></span>
        Project Information</a>
                  </li>
                                                                                    
      <li>
  
                          <a href="../project-reports.html" title="Project Reports">
          <span class="icon-chevron-right"></span>
        Project Reports</a>
                  </li>
            </ul>
              
                
          <hr />

           <div id="poweredBy">
                            <div class="clear"></div>
                            <div class="clear"></div>
               
        
        
        <div id="twitter">
    
    <a href="https://twitter.com/mp911de" class="twitter-follow-button" data-show-count="true" data-align="left" data-size="medium" data-show-screen-name="true" data-lang="en">Follow mp911de</a>
    <script type="text/javascript">!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>

        </div>
                   <div class="clear"></div>
                            <div class="clear"></div>
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="builtBy" alt="Built by Maven" src="../images/logos/maven-feather.png" />
      </a>
                  </div>
          </div>
        </div>
        
                
        <div id="bodyColumn"  class="span10" >
                                  
            <h1>log4j2</h1>
<p>Following settings can be used:</p>

<table border="0" class="table table-striped">
  <thead>
    
<tr class="a">
      
<th>Attribute Name </th>
      
<th align="center">Description </th>
      
<th align="center">Default </th>
    </tr>
  </thead>
  <tbody>
    
<tr class="b">
      
<td>host </td>
      
<td align="center">Hostname/IP-Address of the Logstash host. The <tt>host</tt> field accepts following forms: 
<ul>
<li><tt>tcp:hostname</tt> for TCP transport, e. g. <tt>tcp:127.0.0.1</tt> or <tt>tcp:some.host.com</tt> </li>
<li><tt>udp:hostname</tt> for UDP transport, e. g. <tt>udp:127.0.0.1</tt>, <tt>udp:some.host.com</tt> or just <tt>some.host.com</tt> </li>
<li><tt>redis://[:password@]hostname:port/db-number#listname</tt> for Redis transport. See <a href="../redis.html">Redis transport for logstash-gelf</a> for details. </li>
<li><tt>redis-sentinel://[:password@]hostname:port/db-number?masterId=masterId#listname</tt> for Redis transport with Sentinel lookup. See <a href="../redis.html">Redis transport for logstash-gelf</a> for details. </li></ul> </td>
      
<td align="center">none </td>
    </tr>
    
<tr class="a">
      
<td>port </td>
      
<td align="center">Port of the Logstash host </td>
      
<td align="center"><tt>12201</tt> </td>
    </tr>
    
<tr class="b">
      
<td>version </td>
      
<td align="center">GELF Version <tt>1.0</tt> or <tt>1.1</tt> </td>
      
<td align="center"><tt>1.0</tt> </td>
    </tr>
    
<tr class="a">
      
<td>originHost </td>
      
<td align="center">Originating Hostname </td>
      
<td align="center">FQDN Hostname </td>
    </tr>
    
<tr class="b">
      
<td>extractStackTrace </td>
      
<td align="center">Send the Stack-Trace to the StackTrace field (<tt>true</tt>/<tt>false</tt>) </td>
      
<td align="center"><tt>false</tt> </td>
    </tr>
    
<tr class="a">
      
<td>filterStackTrace </td>
      
<td align="center">Perform Stack-Trace filtering (<tt>true</tt>/<tt>false</tt>)</td>
      
<td align="center"><tt>false</tt> </td>
    </tr>
    
<tr class="b">
      
<td>facility </td>
      
<td align="center">Name of the Facility </td>
      
<td align="center"><tt>logstash-gelf</tt> </td>
    </tr>
    
<tr class="a">
      
<td>mdcProfiling </td>
      
<td align="center">Perform Profiling (Call-Duration) based on MDC Data. See <a href="../mdcprofiling.html">MDC Profiling</a> for details </td>
      
<td align="center"><tt>false</tt> </td>
    </tr>
    
<tr class="b">
      
<td>includeFullMdc </td>
      
<td align="center">Include all fields from the MDC. </td>
      
<td align="center"><tt>false</tt> </td>
    </tr>
    
<tr class="a">
      
<td>maximumMessageSize</td>
      
<td align="center">Maximum message size (in bytes). If the message size is exceeded, the appender will submit the message in multiple chunks. </td>
      
<td align="center"><tt>8192</tt> </td>
    </tr>
    
<tr class="b">
      
<td>additionalFieldTypes </td>
      
<td align="center">Type specification for additional and MDC fields. Supported types: <tt>String</tt>, <tt>long</tt>, <tt>Long</tt>, <tt>double</tt>, <tt>Double</tt> and <tt>discover</tt> (default if not specified, discover field type on parseability). Eg. field=String,field2=double </td>
      
<td align="center"><tt>discover</tt> for all additional fields </td>
    </tr>
    
<tr class="a">
      
<td>ignoreExceptions </td>
      
<td align="center">The default is <tt>true</tt>, causing exceptions encountered while appending events to be internally logged and then ignored. When set to <tt>false</tt> exceptions will be propagated to the caller, instead. You must set this to false when wrapping this Appender in a <tt>FailoverAppender</tt>.</td>
      
<td align="center"><tt>true</tt> </td>
    </tr>
  </tbody>
</table>
<p>The only mandatory field is <tt>host</tt>. All other fields are optional.</p>
<div class="section">
<div class="section">
<h3><a name="Fields"></a>Fields</h3>
<p>Log4j v2 supports an extensive and flexible configuration in contrast to other log frameworks (JUL, log4j v1). This allows you to specify your needed fields you want to use in the GELF message. An empty field configuration results in a message containing only</p>

<ul>
  
<li>timestamp</li>
  
<li>level (syslog level)</li>
  
<li>host</li>
  
<li>facility</li>
  
<li>message</li>
  
<li>short_message</li>
</ul>
<p>You can add different fields:</p>

<ul>
  
<li>Static Literals</li>
  
<li>MDC Fields</li>
  
<li>Log-Event fields (using Pattern Layout)</li>
</ul>
<p>In order to do so, use nested Field elements below the Appender element.</p></div>
<div class="section">
<h3><a name="Static_Literals"></a>Static Literals</h3>

<div class="source">
<div class="source"><pre class="prettyprint linenums">&lt;Field name=&quot;fieldName1&quot; literal=&quot;your literal value&quot; /&gt;
</pre></div></div></div>
<div class="section">
<h3><a name="MDC_Fields"></a>MDC Fields</h3>

<div class="source">
<div class="source"><pre class="prettyprint linenums">&lt;Field name=&quot;fieldName1&quot; mdc=&quot;name of the MDC entry&quot; /&gt;
</pre></div></div></div>
<div class="section">
<h3><a name="Dynamic_MDC_Fields"></a>Dynamic MDC Fields</h3>

<div class="source">
<div class="source"><pre class="prettyprint linenums">&lt;DynamicMdcFields regex=&quot;mdc.*&quot; /&gt;
</pre></div></div>
<p>In contrast to the configuration of other log frameworks log4j2 config uses one <tt>DynamicMdcFields</tt> element per regex (not separated by comma).</p></div>
<div class="section">
<h3><a name="Log-Event_fields"></a>Log-Event fields</h3>
<p>See also: <a class="externalLink" href="http://logging.apache.org/log4j/2.x/manual/layouts.html#PatternLayout">Pattern Layout</a></p>
<p>Set the desired pattern and the field will be sent using the specified pattern value. </p>
<p>Additionally, you can add the host-Field, which can supply you either the FQDN hostname, the simple hostname or the local address.</p>

<table border="0" class="table table-striped">
  <thead>
    
<tr class="a">
      
<th>Option </th>
      
<th>Description</th>
    </tr>
  </thead>
  <tbody>
    
<tr class="b">
      
<td>host{[&#x201c;fqdn&#x201d;<br />&#x201c;simple&#x201d;<br />&#x201c;address&#x201d;]} </td>
      
<td>Outputs either the FQDN hostname, the simple hostname or the local address. You can follow the throwable conversion word with an option in the form %host{option}. <br /> %host{fqdn} default setting, outputs the FQDN hostname, e.g. www.you.host.name.com. <br />%host{simple} outputs simple hostname, e.g. www. <br />%host{address} outputs the local IP address of the found hostname, e.g. 1.2.3.4 or affe:affe:affe::1.</td>
    </tr>
  </tbody>
</table>
<p>XML:</p>

<div class="source">
<div class="source"><pre class="prettyprint linenums">&lt;Configuration packages=&quot;biz.paluch.logging.gelf.log4j2&quot;&gt;
    &lt;Appenders&gt;
        &lt;Gelf name=&quot;gelf&quot; host=&quot;udp:localhost&quot; port=&quot;12201&quot; version=&quot;1.0&quot; extractStackTrace=&quot;true&quot;
              filterStackTrace=&quot;true&quot; mdcProfiling=&quot;true&quot; includeFullMdc=&quot;true&quot; maximumMessageSize=&quot;8192&quot; 
              originHost=&quot;my.host.name&quot; additionalFieldTypes=&quot;fieldName1=String,fieldName2=Double,fieldName3=Long&quot;
              ignoreExceptions=&quot;true&quot;&gt;
            &lt;Field name=&quot;timestamp&quot; pattern=&quot;%d{dd MMM yyyy HH:mm:ss,SSS}&quot; /&gt;
            &lt;Field name=&quot;level&quot; pattern=&quot;%level&quot; /&gt;
            &lt;Field name=&quot;simpleClassName&quot; pattern=&quot;%C{1}&quot; /&gt;
            &lt;Field name=&quot;className&quot; pattern=&quot;%C&quot; /&gt;
            &lt;Field name=&quot;server&quot; pattern=&quot;%host&quot; /&gt;
            &lt;Field name=&quot;server.fqdn&quot; pattern=&quot;%host{fqdn}&quot; /&gt;
            &lt;Field name=&quot;fieldName2&quot; literal=&quot;fieldValue2&quot; /&gt; &lt;!-- This is a static field --&gt;
            &lt;Field name=&quot;mdcField2&quot; mdc=&quot;mdcField2&quot; /&gt; &lt;!-- This is a field using MDC --&gt;
            &lt;DynamicMdcFields regex=&quot;mdc.*&quot; /&gt;
            &lt;DynamicMdcFields regex=&quot;(mdc|MDC)fields&quot; /&gt;
        &lt;/Gelf&gt;
    &lt;/Appenders&gt;
    &lt;Loggers&gt;
        &lt;Root level=&quot;INFO&quot;&gt;
            &lt;AppenderRef ref=&quot;gelf&quot; /&gt;
        &lt;/Root&gt;
    &lt;/Loggers&gt;
&lt;/Configuration&gt;
</pre></div></div></div></div>
                  </div>
            </div>
          </div>

    <hr/>

    <footer>
            <div class="container-fluid">
                      <div class="row-fluid">
                                      <p >Copyright &copy;                   2013&#x2013;2018.
          All rights reserved.    
      </p>
                </div>

        
                </div>
    </footer>
      
    <!-- Piwik -->
    <script type="text/javascript">
    var pkBaseURL = (("https:" == document.location.protocol) ? "https://piwik.paluch.biz/" : "http://piwik.paluch.biz/");
    document.write(unescape("%3Cscript src='" + pkBaseURL + "piwik.js' type='text/javascript'%3E%3C/script%3E"));
    </script><script type="text/javascript">
    try {
    var piwikTracker = Piwik.getTracker(pkBaseURL + "piwik.php", 4);
    piwikTracker.trackPageView();
    piwikTracker.enableLinkTracking();
    } catch( err ) {}
    </script><noscript><p><img src="http://piwik.paluch.biz/piwik.php?idsite=4" style="border:0" alt=""/></p></noscript>
    <!-- End Piwik Tag -->
    </body>
</html>